<html>
    <head>
        <title>ans</title>
        <link rel="stylesheet" type="text/css" href="../style.css">
        <meta charset="UTF-8">
    </head>
    <body>Файлы в С. Функции работы с тестовыми файлами.
        <pre>
                Структура типа  FILE используется функциями ввода/вывода для хра	нения информации, связанной с устройством или файлом. Указатель на тип FILE используется для операций с файлом с помощью библиотечных функций. Его передают библиотечным функциям в качестве параметра. Такие библиотечные функции называются функциями ввода/вывода.
                Примечания.
                1.	При открытии потока  с ним связывается область памяти – буфер.
                2. При аварийном завершении программы выходной буфер может быть не выгружен, поэтому возможна потеря данных.
                3. С помощью функций setbuf() и setvbuf() можно управлять размерами и наличием буферов.
                4. Перед началом работы программы операционная система автоматически открывает пять стандартных потоков:
                1)	stdin – стандартный ввод;
                2)	stdout – стандартный вывод;
                3)	stdprn – стандартная печать;
                4)	stderr – стандартный вывод сообщений об ошибках;
                5)	stdaux – стандартный дополнительный поток (стандартные порты).
                Потоки 1), 2), 4) относятся к консоли (con), 3) – к prn, 5) – к aux (коммуникационный канал), т.е., в начале работы программы автоматически открываются потоки следующими операторами:
                1)	FILE *stdin=fopen("con", "r");
                2)	FILE *stdout=fopen("con", "w");
                3)	FILE *stdprn=fopen("prn", "w");
                4)	FILE *stderr=fopen("con", "w");
                5)	FILE *stdaux=fopen("aux", "wb");
                Файлы stdin и stdout можно переназначать при запуске exe-программы или в программе с помощью функции freopen. Ее прототип:
                
                File *freopen(const char *filename, const char *mode, FILE *stream);
                
                где freopen – имя функции ;
                 filename – имя файла ;
                 mode – режим работы файла; 
                stream - поток. 
                Функция freopen работает аналогично функции fopen, но предварительно закрывает поток  stream, если тот был ранее открыт.
                
                    Закрытие файла (потока)
                
                Для закрытия потоков, используемых в программе, применяются стандартные функции fclose() и  fcloseall().
                Один заданный поток закрывается функцией fclose. Ее прототип:
                int fclose (FILE *stream);
                где stream – поток.
                Пример обращения к функции fclose:
                fclose (f);
                Если поток успешно закрыт, функция fclose возвращает значение 0. Если при закрытии потока произошла ошибка – значение EOF (-1).
                Функция fcloseall() закрывает все потоки, открытые с помощью fopen(), кроме stdin, stdout, stderr. Прототип функции fcloseall:
                int fcloseall();
                Функция fcloseall()  возвращает количество закрытых потоков или значение EOF (-1), если при закрытии произошла ошибка.
                Примечание. Функция perror () позволяет вывести сообщение об ошибке при неуспешном закрытии файла. Ее прототип:
                void perror(const char *s);
                
                Пример.
                FILE * fp;
                fp=fopen("d.dat", "r");
                if(!fp) perror("Нельзя открыть файл для чтения");
                else fclose ("d.dat");
                
                    Удаление файла
                
                Удалить файл можно с помощью функции remove. Ее прототип:
                int remove (const char *filename);
                где filename – указатель на строку с именем физического файла (имя файла).
                Функция remove возвращает значение 0 при успешном удалении файла и не нуль в противном случае. Открытый файл необходимо предварительно закрыть.
                
                
        </pre>
    </body>
</html>